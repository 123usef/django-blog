{% extends 'blogApp/base.html' %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>homepage</title>
</head>

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>homepage</title>
  </head>

  <body>
    {% block title_block %} 
    {% endblock %}
     {% block main_block %}
     <!-- <div class="row"> -->
  <div class="container" style="margin-top: 3%;">

    {% comment %} show posts  {% endcomment %}
    {% if user.is_authenticated and subs %}
    <div class="row">
        {% for sub in subs %}
        <h2 style="margin-left: 8%;margin-top: 3%;"><i><u>{{sub}}</u></i></h2>
        {% for x in posts %}
           {% if sub.cat_id == x.cat_id %}   
              <div class="card text-white col-4 offset-1" style="width:25%;background-color: #242424;  margin-top: 2%; border: 1px solid #9b59b6;">
                <a href="{% url 'post' x.id  %}"><img src="{{ x.post_picture.url }}" class="card-img-top" style="height:30vh; width:100%; object-fit: cover; " alt="post-image"></a>
                <div class="card-body">
                  <p><h3>{{ x.post_title }}</h3></p>
                  <p> Created By : <strong>{{x.user_id.username}} </strong></p>
                  <p>Category: {{x.cat_id}}</p>
                  <p><cite >Date :{{x.post_cr_date}}</cite></p>
                </div>
                <a href="{% url 'post' x.id  %}" class='btn btn_style' style="margin-bottom: 1%;"> Details </a>
              </div>
            {% endif %}
          {% endfor %}
        {% endfor %}
    </div>
    {% else %}

    <div class="row">
      
     
      {% for x in posts %}
         
            <div class="card text-white col-4 offset-1" style="width:25%;background-color: #242424;  margin-top: 2%; border: 1px solid #9b59b6;">
              <a href="{% url 'post' x.id  %}"><img src="{{ x.post_picture.url }}" class="card-img-top" style="height:30vh; width:100%; object-fit: cover; " alt="post-image"></a>
              <div class="card-body">
                <p><h3>{{ x.post_title }}</h3></p>
                <p> Created By : <strong>{{x.user_id.username}} </strong></p>
                <p>Category: {{x.cat_id}}</p>
                <p><cite >Date :{{x.post_cr_date}}</cite></p>
              </div>
              
              <a href="{% url 'post' x.id  %}" class='btn btn_style' style="margin-bottom: 1%;"> Details </a>
            </div>

        {% endfor %}  
  </div>
  {% endif %}
    <hr>

    <div class="row">
      {% for x in ln %} 
    <div class="card text-white  col-4 offset-1 " style="width: 25%;background-color: #242424;margin-top: 2%;border: 1px solid #9b59b6;">
      <a href="{% url 'post' %}"><img src="{{ x.urlToImage }}" class="card-img-top" style="height:30vh ;wdith:100 ; object-fit: cover;" alt="..."></a>
      <div class="card-body">
        <p><h3>{{ x.title }}</h3></p>
        <p> Created By : <strong>{{ x.author }} </strong></p>
        <p><cite >Date :{{ x.publishedAt }}</cite></p>
        <p class="card-text">{{ x.articles.description }}</p>
        <div class="accordion-item" style="color: #242424;">
          <h2 class="accordion-header" id="headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Details
          </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              {{x.content}}
            </div>
          </div>
       </div> 
        <!-- <a href="{% url 'post'   %}" class='btn btn-primary'> Details </a> -->
      </div>
    </div>
      {% endfor %} 
  </div>
  <!-- </div> -->

</div>


  {% endblock %}
</body>
</html>
